<!doctype html>

<meta charset="utf-8"/>

<style type="text/css">
	* {
		box-sizing: border-box;
	}
	body{
		font-family: sans-serif;
		font-size: 12px;
		background: #f8f8f8;
		color: #b8b8b8;
	}
	section{
		margin:0 auto 0;
		min-width: 700px;
		width: 80%;
		max-width: 880px;
		text-align: center;
	}
	a{
		color: #b8b8b8;
		text-decoration: none;
		border-bottom: 1px solid rgba(130,130,130,.3);
	}
	a:hover{
		color: rgba(255,120,130,1);
		border-bottom-color: rgba(255,120,130,.6);
	}
	h1,h2,h3 {
		text-align: center;
		text-transform: uppercase;
		letter-spacing: 1px;
		/*font-weight: normal;*/
		font-size: 1.6em;
		line-height: 1.6;
		margin-top: 2.4em;
		margin-bottom: 1.2em;
		text-shadow: 0 1px 0 white;
	}
	h1{
		text-transform: none;
		margin: 3rem 0 -1rem;
		font-size: 2.8em;
	}
	a.section-link{
		text-decoration: none;
		border-bottom: none;
	}
	h3 {
		font-size: 1.6em;
		text-transform: none;
		letter-spacing: 0;
		margin-top: 2.4em;
		margin-bottom: 1.6em;
	}
	h2 + h3 {
		margin-top: -.9em;
	}
	p{
		margin: 1.6em;
	}
	h2 + p{
		margin-top: -.9em;
	}
	.container{
		background: white;
		display: inline-block;
		width: 30%;
		height: 200px;
		margin: 8px 6px;
		vertical-align: top;
		text-align: center;
		line-height: 200px;
		font-size: 9px;
		letter-spacing: 1px;
		text-transform: uppercase;
		box-shadow: 0 3px 9px rgba(120,130,140,.2);
	}
	.container-padding{
		padding: 10px;
		position: relative;
		border: 5px solid rgba(255, 230, 203, .5);
		margin: 10px;
		background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='5' height='5'><path fill='rgba(255, 230, 203 ,1)' d='M 0 0 L 1 0 0 1 0 0 z'/><path fill='rgba(255, 230, 203 ,1)' d='M 0 5 L 5 0 5 1 1 5 0 5 z'/></svg>"), white;
	}
	.container.container-padding{
		line-height: 160px;
	}
	.container-padding:after{
		content: '';
		position: absolute;
		top: 20px;
		left: 20px;
		right: 20px;
		bottom: 20px;
		background: white;
		/*border: 1px dashed #bbb;*/
	}
	.placee{
		display: block;
		width: 65px;
		height: 55px;
		line-height: 62px;
		background: rgb(162, 255, 199);
		color: rgba(81, 104, 148, .9);
		text-align: center;
		z-index: 3;
		white-space: nowrap;
		border: 2px solid rgb(112, 235, 159);
	}
	.placer{
		position: relative;
		background: rgb(164, 221, 248);
		display: inline-block;
		width: 120px;
		height: 40px;
		line-height: 48px;
		vertical-align: middle;
		color: rgba(81, 104, 148, .9);
		text-align: center;
		z-index: 1;
		white-space: nowrap;
		border: 2px solid rgb(134, 201, 228);
	}
	.placee:before{
		content: 'align';
		color: rgba(81, 104, 148, .7);
		position: absolute;
		left:0;
		right: 0;
		bottom: 50%;
		line-height: 16px;
		font-size: 9px;
		letter-spacing: 0;
		text-transform: none;
	}
	.placer:before{
		content: 'side';
		color: rgba(81, 104, 148, .7);
		position: absolute;
		left:0;
		right: 0;
		line-height: 16px;
		bottom: 50%;
		letter-spacing: 0;
		text-transform: none;
	}
	.placer:hover, .placee:hover{
		z-index: 99!important;
	}
	.placer-small{
		width: 50px;
	}


	/* Restricting container */
	.container-restrictor{
		position: relative;
		line-height: 20px;
		overflow: hidden;
		background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='5' height='5'><path fill='rgba(120,120,120,.4)' d='M 0 0 L 1 0 0 1 0 0 z'/><path fill='rgba(120,120,120,.4)' d='M 0 5 L 5 0 5 1 1 5 0 5 z'/></svg>"), white;
	}
	.container-restrictor:hover{
		background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='5' height='5'><path fill='rgba(50,50,50,1)' d='M 0 0 L 1 0 0 1 0 0 z'/><path fill='rgba(50,50,50,1)' d='M 0 5 L 5 0 5 1 1 5 0 5 z'/></svg>"), white;
	}
	.container-restrictor .placer{
		position: absolute;
		top: 0;
		right: 0;
		bottom: 0;
		left: 0;
		margin: auto;
		z-index: 2;
	}

	/** special margins to restricted placee */
	.container-restrictor .placee{
		margin: 4px;
	}
	.container-restrictor .placee:after{
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		box-shadow: 0 0 0 6px rgba(237, 179, 23, 0.3);
	}
	.container-restrictor-v .placee{
		margin: 10px 0;
	}
	.container-restrictor-v .placee:after{
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		box-shadow: 0 -12px rgba(237, 179, 23, 0.3), 0 12px rgba(237, 179, 23, 0.3);
	}
	.container-restrictor-h .placee{
		margin: 0 10px;
	}
	.container-restrictor-h .placee:after{
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		box-shadow: -12px 0 rgba(237, 179, 23, 0.3), 12px 0 rgba(237, 179, 23, 0.3);
	}

	.limiter{
		position: absolute;
		border: 2px dashed rgba(128,128,128,.3);
		background: white;
		top: 10px;
		left: 10px;
		bottom: 10px;
		right: 10px;
		z-index: 1;
	}
	.limiter-v{
		border-left: none!important;
		border-right: none!important;
		left: 0;
		right: 0;
	}
	.limiter-h{
		border-top: none!important;
		border-bottom: none!important;
		top: 0;
		bottom: 0;
	}
	.container-restrictor:hover .limiter{
		opacity: 1;
		border: 2px dashed rgba(128,128,128,1);
	}
	.avoid{
		position: absolute;
		border: 2px dashed rgba(128,128,128,.3);
		top: 10px;
		left: 10px;
		min-height: 30px;
		min-width: 30px;
		z-index: 4;
		cursor: move;
		background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='5' height='5'><path fill='rgba(120,120,120,.4)' d='M 0 0 L 1 0 0 1 0 0 z'/><path fill='rgba(120,120,120,.4)' d='M 0 5 L 5 0 5 1 1 5 0 5 z'/></svg>");
	}
	.container-avoid{
		position: relative;
	}
	.container-avoid:hover .avoid{
		border: 2px dashed rgba(128,128,128,1);
		background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='5' height='5'><path fill='rgba(50,50,50,1)' d='M 0 0 L 1 0 0 1 0 0 z'/><path fill='rgba(50,50,50,1)' d='M 0 5 L 5 0 5 1 1 5 0 5 z'/></svg>");
	}



	.container-label-center{
		position: relative;
	}
	.container-label-center:before{
		content: 'side';
		color: rgba(91, 104, 118, .7);
		left:0;
		right: 0;
		top: -5px;
		position: absolute;
		letter-spacing: 0;
		text-transform: none;
	}
	.container-label-center:after{
		content: 'center';
		position: absolute;
		color: rgba(91, 104, 118, .7);
		left:0;
		right: 0;
		top: 8px;
	}

	[hidden] {
		display: none!important;
	}

	footer{
		margin: 2em;
		text-align: center;
	}

	.splashscreen{
		position:fixed;
		top:0;
		left:0;
		bottom:0;
		right:0;
		background:white;
		z-index:999;
		padding:1rem;
		transition: .15s linear opacity;
	}
</style>

<script src="bundle.js"></script>


<h1><a href="http://github.com/dfcreative/placer"><em>Placer.js</em></a> tests</h1>


<section id="static">
	<h2><a class="section-link" href="#static">§&thinsp;1.</a> Static position</h2>


	<div class="container">
		<div class="placee" side="left" align="top" title="align">top</div>
		<div class="placer" title="side">left</div>
	</div>
	<div class="container">
		<div class="placee" side="left" align="middle" title="align">middle</div>
		<div class="placer" title="side">left</div>
	</div>
	<div class="container">
		<div class="placee" side="left" align="bottom" title="align">bottom</div>
		<div class="placer" title="side">left</div>
	</div>



	<div class="container">
		<div class="placee" side="right" align="top" title="align">top</div>
		<div class="placer" title="side">right</div>
	</div>
	<div class="container">
		<div class="placee" side="right" align="middle" title="align">middle</div>
		<div class="placer" title="side">right</div>
	</div>
	<div class="container">
		<div class="placee" side="right" align="bottom" title="align">bottom</div>
		<div class="placer" title="side">right</div>
	</div>



	<div class="container">
		<div class="placee" side="top" align="left" title="align">left</div>
		<div class="placer" title="side">top</div>
	</div>
	<div class="container">
		<div class="placee" side="top" align="center" title="align">center</div>
		<div class="placer" title="side">top</div>
	</div>
	<div class="container">
		<div class="placee" side="top" align="right" title="align">right</div>
		<div class="placer" title="side">top</div>
	</div>


	<div class="container">
		<div class="placee" side="bottom" align="left" title="align">left</div>
		<div class="placer" title="side">bottom</div>
	</div>
	<div class="container">
		<div class="placee" side="bottom" align="center" title="align">center</div>
		<div class="placer" title="side">bottom</div>
	</div>
	<div class="container">
		<div class="placee" side="bottom" align="right" title="align">right</div>
		<div class="placer" title="side">bottom</div>
	</div>
</section>


<section id="relative">
	<h2><a class="section-link" href="#relative">§&thinsp;2.</a> Relative position with paddings,<br/>margins and border</h2>


	<div class="container container-padding">
		<div class="placee" side="left" align="top" title="align">top</div>
		<div class="placer" title="side">left</div>
	</div>
	<div class="container container-padding">
		<div class="placee" side="left" align="middle" title="align">middle</div>
		<div class="placer" title="side">left</div>
	</div>
	<div class="container container-padding">
		<div class="placee" side="left" align="bottom" title="align">bottom</div>
		<div class="placer" title="side">left</div>
	</div>


	<div class="container container-padding">
		<div class="placee" side="right" align="top" title="align">top</div>
		<div class="placer" title="side">right</div>
	</div>
	<div class="container container-padding">
		<div class="placee" side="right" align="middle" title="align">middle</div>
		<div class="placer" title="side">right</div>
	</div>
	<div class="container container-padding">
		<div class="placee" side="right" align="bottom" title="align">bottom</div>
		<div class="placer" title="side">right</div>
	</div>


	<div class="container container-padding">
		<div class="placee" side="top" align="left" title="align">left</div>
		<div class="placer" title="side">top</div>
	</div>
	<div class="container container-padding">
		<div class="placee" side="top" align="center" title="align">center</div>
		<div class="placer" title="side">top</div>
	</div>
	<div class="container container-padding">
		<div class="placee" side="top" align="right" title="align">right</div>
		<div class="placer" title="side">top</div>
	</div>


	<div class="container container-padding">
		<div class="placee" side="bottom" align="left" title="align">left</div>
		<div class="placer" title="side">bottom</div>
	</div>
	<div class="container container-padding">
		<div class="placee" side="bottom" align="center" title="align">center</div>
		<div class="placer" title="side">bottom</div>
	</div>
	<div class="container container-padding">
		<div class="placee" side="bottom" align="right" title="align">right</div>
		<div class="placer" title="side">bottom</div>
	</div>
</section>


<section id="restriction">
	<h2><a class="section-link" href="#restriction">§&thinsp;3.</a> Restricted area</h2>

	<div class="container container-restrictor container-restrictor-v">
		<div class="limiter limiter-v"></div>
		<div class="placee" find-best-side="false" within=":parent .limiter" side="left" align="top" title="align">top</div>
		<div class="placer" title="side">left</div>
	</div>
	<div class="container container-restrictor container-restrictor-v">
		<div class="limiter limiter-v"></div>
		<div class="placee" find-best-side="false" within=":parent .limiter" side="left" align="middle" title="align">middle</div>
		<div class="placer" title="side">left</div>
	</div>
	<div class="container container-restrictor container-restrictor-v">
		<div class="limiter limiter-v"></div>
		<div class="placee" find-best-side="false" within=":parent .limiter" side="left" align="bottom" title="align">bottom</div>
		<div class="placer" title="side">left</div>
	</div>


	<div class="container container-restrictor container-restrictor-v">
		<div class="limiter limiter-v"></div>
		<div class="placee" find-best-side="false" within=":parent .limiter" side="right" align="top" title="align">top</div>
		<div class="placer" title="side">right</div>
	</div>
	<div class="container container-restrictor container-restrictor-v">
		<div class="limiter limiter-v"></div>
		<div class="placee" find-best-side="false" within=":parent .limiter" side="right" align="middle" title="align">middle</div>
		<div class="placer" title="side">right</div>
	</div>
	<div class="container container-restrictor container-restrictor-v">
		<div class="limiter limiter-v"></div>
		<div class="placee" find-best-side="false" within=":parent .limiter" side="right" align="bottom" title="align">bottom</div>
		<div class="placer" title="side">right</div>
	</div>


	<div class="container container-restrictor container-restrictor-h">
		<div class="limiter limiter-h"></div>
		<div class="placee" find-best-side="false" within=":parent .limiter" side="top" align="left" title="align">left</div>
		<div class="placer" title="side">top</div>
	</div>
	<div class="container container-restrictor container-restrictor-h">
		<div class="limiter limiter-h"></div>
		<div class="placee" find-best-side="false" within=":parent .limiter" side="top" align="center" title="align">center</div>
		<div class="placer" title="side">top</div>
	</div>
	<div class="container container-restrictor container-restrictor-h">
		<div class="limiter limiter-h"></div>
		<div class="placee" find-best-side="false" within=":parent .limiter" side="top" align="right" title="align">right</div>
		<div class="placer" title="side">top</div>
	</div>


	<div class="container container-restrictor container-restrictor-h">
		<div class="limiter limiter-h"></div>
		<div class="placee" find-best-side="false" within=":parent .limiter" side="bottom" align="left" title="align">left</div>
		<div class="placer" title="side">bottom</div>
	</div>
	<div class="container container-restrictor container-restrictor-h">
		<div class="limiter limiter-h"></div>
		<div class="placee" find-best-side="false" within=":parent .limiter" side="bottom" align="center" title="align">center</div>
		<div class="placer" title="side">bottom</div>
	</div>
	<div class="container container-restrictor container-restrictor-h">
		<div class="limiter limiter-h"></div>
		<div class="placee" find-best-side="false" within=":parent .limiter" side="bottom" align="right" title="align">right</div>
		<div class="placer" title="side">bottom</div>
	</div>
</section>


<section id="centered">
	<h2><a class="section-link" href="#centered">§&thinsp;4.</a> Centered placement</h2>

	<h3>4.1. Relative to a target</h3>

		<div class="container">
			<div class="placee" side="center" align="top" title="align">top</div>
			<div class="placer" title="side">center</div>
		</div>
		<div class="container">
			<div class="placee" side="center" align="middle" title="align">middle</div>
			<div class="placer" title="side">center</div>
		</div>
		<div class="container">
			<div class="placee" side="center" align="bottom" title="align">bottom</div>
			<div class="placer" title="side">center</div>
		</div>
		<div class="container">
			<div class="placee" side="center" align="left" title="align">left</div>
			<div class="placer" title="side">center</div>
		</div>
		<div class="container">
			<div class="placee" side="center" align="center" title="align">center</div>
			<div class="placer" title="side">center</div>
		</div>
		<div class="container">
			<div class="placee" side="center" align="right" title="align">right</div>
			<div class="placer" title="side">center</div>
		</div>
		<div class="container">
			<div class="placee" side="center" align="0,0" title="align">0, 0</div>
			<div class="placer" title="side">center</div>
		</div>
		<div class="container">
			<div class="placee" side="center" align=".3,.8" title="align">0.3, 0.8</div>
			<div class="placer" title="side">center</div>
		</div>
		<div class="container">
			<div class="placee" side="center" align="1,1" title="align">1, 1</div>
			<div class="placer" title="side">center</div>
		</div>

	<h3>4.2. Relative to a container</h3>

		<div class="container container-label-center">
			<div class="placee" relative-to="parent" side="center" align="top" title="align">top</div>
		</div>
		<div class="container container-label-center">
			<div class="placee" relative-to="parent" side="center" align="middle" title="align">middle</div>
		</div>
		<div class="container container-label-center">
			<div class="placee" relative-to="parent" side="center" align="bottom" title="align">bottom</div>
		</div>
		<div class="container container-label-center">
			<div class="placee" relative-to="parent" side="center" align="left" title="align">left</div>
		</div>
		<div class="container container-label-center">
			<div class="placee" relative-to="parent" side="center" align="center" title="align">center</div>
		</div>
		<div class="container container-label-center">
			<div class="placee" relative-to="parent" side="center" align="right" title="align">right</div>
		</div>
		<div class="container container-label-center">
			<div class="placee" relative-to="parent" side="center" align="0,0" title="align">0, 0</div>
		</div>
		<div class="container container-label-center">
			<div class="placee" relative-to="parent" side="center" align=".3,.8" title="align">0.3, 0.8</div>
		</div>
		<div class="container container-label-center">
			<div class="placee" relative-to="parent" side="center" align="1,1" title="align">1, 1</div>
		</div>
</section>


<section id="dynamic">
	<h2><a class="section-link" href="#dynamic">§&thinsp;5.</a> Automatically change side</h2>

	<div class="container container-restrictor">
		<div class="limiter"></div>
		<div class="placee" within=":parent .limiter" side="left" align="top" title="align">top</div>
		<div class="placer placer-small" title="side">left</div>
	</div>
	<div class="container container-restrictor">
		<div class="limiter"></div>
		<div class="placee" within=":parent .limiter" side="left" align="middle" title="align">middle</div>
		<div class="placer placer-small" title="side">left</div>
	</div>
	<div class="container container-restrictor">
		<div class="limiter"></div>
		<div class="placee" within=":parent .limiter" side="left" align="bottom" title="align">bottom</div>
		<div class="placer placer-small" title="side">left</div>
	</div>


	<div class="container container-restrictor">
		<div class="limiter"></div>
		<div class="placee" within=":parent .limiter" side="right" align="top" title="align">top</div>
		<div class="placer placer-small" title="side">right</div>
	</div>
	<div class="container container-restrictor">
		<div class="limiter"></div>
		<div class="placee" within=":parent .limiter" side="right" align="middle" title="align">middle</div>
		<div class="placer placer-small" title="side">right</div>
	</div>
	<div class="container container-restrictor">
		<div class="limiter"></div>
		<div class="placee" within=":parent .limiter" side="right" align="bottom" title="align">bottom</div>
		<div class="placer placer-small" title="side">right</div>
	</div>


	<div class="container container-restrictor">
		<div class="limiter"></div>
		<div class="placee" within=":parent .limiter" side="top" align="left" title="align">left</div>
		<div class="placer placer-small" title="side">top</div>
	</div>
	<div class="container container-restrictor">
		<div class="limiter"></div>
		<div class="placee" within=":parent .limiter" side="top" align="center" title="align">center</div>
		<div class="placer placer-small" title="side">top</div>
	</div>
	<div class="container container-restrictor">
		<div class="limiter"></div>
		<div class="placee" within=":parent .limiter" side="top" align="right" title="align">right</div>
		<div class="placer placer-small" title="side">top</div>
	</div>


	<div class="container container-restrictor">
		<div class="limiter"></div>
		<div class="placee" within=":parent .limiter" side="bottom" align="left" title="align">left</div>
		<div class="placer placer-small" title="side">bottom</div>
	</div>
	<div class="container container-restrictor">
		<div class="limiter"></div>
		<div class="placee" within=":parent .limiter" side="bottom" align="center" title="align">center</div>
		<div class="placer placer-small" title="side">bottom</div>
	</div>
	<div class="container container-restrictor">
		<div class="limiter"></div>
		<div class="placee" within=":parent .limiter" side="bottom" align="right" title="align">right</div>
		<div class="placer placer-small" title="side">bottom</div>
	</div>
</section>


<section id="avoid">
	<h2><a class="section-link" href="#avoid">§&thinsp;6.</a> Avoid elements (pending)</h2>
	<p>Looking for a use-case. <a href="https://github.com/dfcreative/placer/issues/new">Request this feature</a>, if you need this implemented.</p>

	<div class="container container-avoid">
		<div class="avoid"></div>
		<div class="placee" avoid=":parent .avoid" side="left" align="top" title="align">top</div>
		<div class="placer placer-small" title="side">left</div>
	</div>
	<div class="container container-avoid">
		<div class="avoid"></div>
		<div class="placee" avoid=":parent .avoid" side="left" align="middle" title="align">middle</div>
		<div class="placer placer-small" title="side">left</div>
	</div>
	<div class="container container-avoid">
		<div class="avoid"></div>
		<div class="placee" avoid=":parent .avoid" side="left" align="bottom" title="align">bottom</div>
		<div class="placer placer-small" title="side">left</div>
	</div>


	<div class="container container-avoid">
		<div class="avoid"></div>
		<div class="placee" avoid=":parent .avoid" side="right" align="top" title="align">top</div>
		<div class="placer placer-small" title="side">right</div>
	</div>
	<div class="container container-avoid">
		<div class="avoid"></div>
		<div class="placee" avoid=":parent .avoid" side="right" align="middle" title="align">middle</div>
		<div class="placer placer-small" title="side">right</div>
	</div>
	<div class="container container-avoid">
		<div class="avoid"></div>
		<div class="placee" avoid=":parent .avoid" side="right" align="bottom" title="align">bottom</div>
		<div class="placer placer-small" title="side">right</div>
	</div>


	<div class="container container-avoid">
		<div class="avoid"></div>
		<div class="placee" avoid=":parent .avoid" side="top" align="left" title="align">left</div>
		<div class="placer placer-small" title="side">top</div>
	</div>
	<div class="container container-avoid">
		<div class="avoid"></div>
		<div class="placee" avoid=":parent .avoid" side="top" align="center" title="align">center</div>
		<div class="placer placer-small" title="side">top</div>
	</div>
	<div class="container container-avoid">
		<div class="avoid"></div>
		<div class="placee" avoid=":parent .avoid" side="top" align="right" title="align">right</div>
		<div class="placer placer-small" title="side">top</div>
	</div>


	<div class="container container-avoid">
		<div class="avoid"></div>
		<div class="placee" side="bottom" align="left" title="align">left</div>
		<div class="placer placer-small" title="side">bottom</div>
	</div>
	<div class="container container-avoid">
		<div class="avoid"></div>
		<div class="placee" side="bottom" align="center" title="align">center</div>
		<div class="placer placer-small" title="side">bottom</div>
	</div>
	<div class="container container-avoid">
		<div class="avoid"></div>
		<div class="placee" side="bottom" align="right" title="align">right</div>
		<div class="placer placer-small" title="side">bottom</div>
	</div>
</section>


<footer>
Made by <a href="http://github.com/dfcreative">Dmitry Ivanov</a>.
</footer>


<!--
<h2>Corner cases</h2>
TODO: placer and placee in different containers
TODO: placee is outside the static body
TODO: fixed/static placer/placee position
TODO: to/within window
TODO: browsers
-->


<script>
	var q = require('queried');
	var place = require('placer');
	var Draggy = require('draggy');
	var Resizable = require('resizable');


	//init all resizables
	var $resizables = document.querySelectorAll('.limiter');
	for (var i = 0, l = $resizables.length, $resizable; i < l; i++){
		$resizable = $resizables[i];
		var res = new Resizable($resizable, {
			within: $resizable.parentNode,
			resize: function(){
				var container = this.element.parentNode;
				updateItem(container.querySelector('.placee'));
			}
		});
	}


	//init elements to avoid
	var $avoidables = document.querySelectorAll('.avoid');
	for (var i = 0, l = $avoidables.length, $avoidable; i < l; i++){
		$avoidable = $avoidables[i];
		var res = new Resizable($avoidable, {
			resize: function(){
			}
		});
		var dr = new Draggy($avoidable, {
		});
	}


	//query all placee blocks, apply placer positioning
	function update(){
		q.all('.placee').forEach(updateItem);
	}

	function updateItem($placee){
		var within = $placee.getAttribute('within');

		if (/limiter/.test(within)) {
			within = q('.limiter', $placee.parentNode);
		}

		var relTo = $placee.getAttribute('relative-to') || q('.placer', $placee.parentNode);

		if (relTo === 'parent') {
			relTo = $placee.parentNode;
		}

		var opts = {
			to: relTo,
			side: $placee.getAttribute('side'),
			avoid: $placee.getAttribute('avoid'),
			align: $placee.getAttribute('align'),
			within: within,
			auto: $placee.getAttribute('find-best-side') === 'false' ? false : true
		};

		place($placee, opts);
	}

	//double update to exclude caused horizontal scroll
	update();
	update();

	window.addEventListener('resize', update);
</script>